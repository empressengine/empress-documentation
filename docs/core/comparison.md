# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏

## Empress Core vs bitecs vs ecsy


| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Empress Core | bitecs | ecsy |
|----------------|--------------|---------|------|
| –Ø–∑—ã–∫ | TypeScript (TS-first) | TypeScript/JavaScript | JavaScript + —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Ä—É—á–Ω—É—é |
| –ü–æ–¥—Ö–æ–¥ | Data Oriented + OOP Style + DI | –ß–∏—Å—Ç–æ Data Oriented, –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π | OOP, –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è | ‚úÖ –ü–æ–ª–Ω–∞—è TS-—Ç–∏–ø–∏–∑–∞—Ü–∏—è | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è, –º–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ –∫–æ–¥–∞ | ‚ùå –ü–æ—á—Ç–∏ –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | üöÄ –•–æ—Ä–æ—à–∞—è, —Å –∫—ç—à–∞–º–∏ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é | üöÄüöÄ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (bitwise data + AoS/SoA) | üê¢ –°—Ä–µ–¥–Ω—è—è, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —É–¥–æ–±—Å—Ç–≤–æ |
| –ì–∏–±–∫–æ—Å—Ç—å | ‚úÖ –í—ã—Å–æ–∫–∞—è (DI, —Å–∏–≥–Ω–∞–ª—ã, async, –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª, –≥—Ä—É–ø–ø—ã –°–∏—Å—Ç–µ–º) | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è, –≤—Å—ë –≤—Ä—É—á–Ω—É—é | ‚úÖ –°—Ä–µ–¥–Ω—è—è (—É–¥–æ–±–Ω—ã–µ API, –Ω–æ –Ω–µ –º–∞—Å—à—Ç–∞–±–Ω–∞—è) |
| –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ async-—Å–∏—Å—Ç–µ–º –∏ –æ—á–µ—Ä–µ–¥–µ–π | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| DI / Signal system | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω—ã | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (onInit, onDestroy) | ‚ùå –ù–µ—Ç | ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | üìò –ü–æ–¥—Ä–æ–±–Ω–∞—è | üìÑ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | üìò –•–æ—Ä–æ—à–∞—è |
| –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è | –°—Ä–µ–¥–Ω–∏—Ö/–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –ú–∞—Å—Å–∏–≤–Ω—ã–µ —Å–∏–º—É–ª—è—Ü–∏–∏, WebGL/3D | –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã, –æ–±—É—á–µ–Ω–∏–µ, –ø—Ä–æ—Å—Ç—ã–µ –∏–≥—Ä—ã |
| –ö—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è | ‚õ∞Ô∏è –°—Ä–µ–¥–Ω—è—è | üß† –°–ª–æ–∂–Ω–∞—è | üë∂ –ù–∏–∑–∫–∞—è |

 
## –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É

### Empress Core
–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ –ø–æ–¥–æ–π–¥—ë—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–±–∫–∏—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –∏–≥—Ä, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —Å–∏–≥–Ω–∞–ª—ã –∏ –∏–Ω—ä–µ–∫—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –Ω–∞ —É–¥–æ–±–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
–ò –ø—Ä–∏ —ç—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º, —á—Ç–æ–±—ã –±–µ–∑ –ø—Ä–æ–±–µ–ª–º —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª—é–±—ã–µ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏.

### bitecs
–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã—Å—Ç—Ä—ã–π –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ data-oriented, –ø–æ—á—Ç–∏ –∫–∞–∫ –Ω–∞ C –∏–ª–∏ Rust. –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç—ã—Å—è—á –æ–±—ä–µ–∫—Ç–æ–≤. –ù–æ —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –∫–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é.

### ecsy
–ü—Ä–æ—Å—Ç–æ–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, —É–¥–æ–±–µ–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é A-Frame (VR). –û–¥–Ω–∞–∫–æ –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–¥–µ –≤–∞–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### Empress Core

#### –°–æ–∑–¥–∞–Ω–∏–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
export class Position {
  constructor(public x = 0, public y = 0) {}
}

export class Velocity {
  constructor(public x = 0, public y = 0) {}
}
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°—É—â–Ω–æ—Å—Ç–∏
```typescript
const player = new Entity('player');

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
player.addComponent(new Position(0, 0));
player.addComponent(new Velocity(1, 1));
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°–∏—Å—Ç–µ–º
```typescript
export class MovementSystem extends System<IUpdateLoopData> {
  execute(data: IUpdateLoopData): void {
    const entities = this.filter({
      includes: [Position, Velocity]
    });

    entities.forEach(entity => {
      const pos = entity.getComponent(Position);
      const vel = entity.getComponent(Velocity);
      pos.x += vel.x * data.deltaTime;
      pos.y += vel.y * data.deltaTime;
    });
  }
}
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –ì—Ä—É–ø –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```typescript
class MovementGroup extends SystemGroup<IUpdateLoopData> {
   public setup(chain: SystemChain, data: IUpdateLoopData): void {
    chain.add(MovementSystem, data);
   }
}
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –∏ –º–æ–¥—É–ª–µ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞
const empress = new EnpressCore();
empress.init();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –°—É—â–Ω–æ—Å—Ç–µ–π –≤ –∏–≥—Ä–µ
const entityStorage = ServiceContainer.instance.get(EntityStorage);
entityStorage.add(player);

// –ü–æ–¥–ø–∏–∏–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –°–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –°–∏—Å—Ç–µ–º –≤ –≥—Ä—É–ø–ø–∞—Ö
const baseSignals: ISignalConfig[] = [
    {
        signal: OnUpdateSignal,
        groups: [MovementGroup]
    },
];
empress.listen(baseSignals);

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
empress.start();
```

###  bitecs

#### –°–æ–∑–¥–∞–Ω–∏–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
const Position = defineComponent({ x: Types.f32, y: Types.f32 });
const Velocity = defineComponent({ x: Types.f32, y: Types.f32 });
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—Ä–∞
```typescript
const world = createWorld();
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°—É—â–Ω–æ—Å—Ç–∏
```typescript
const player = addEntity(world);
addComponent(world, Position, player);
addComponent(world, Velocity, player);
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
```typescript
Position.x[player] = 100;
Position.y[player] = 100;
Velocity.x[player] = 50;
Velocity.y[player] = 0;
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°–∏—Å—Ç–µ–º
```typescript
const moveQuery = defineQuery([Position, Velocity]);
function movementSystem(world, deltaTime: number) {
  const entities = moveQuery(world);
  for (let eid of entities) {
    Position.x[eid] += Velocity.x[eid] * deltaTime;
    Position.y[eid] += Velocity.y[eid] * deltaTime;
  }
  return world;
}
```

### ecsy

#### –°–æ–∑–¥–∞–Ω–∏–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
class Position extends Component {}
Position.schema = { x: { type: Types.Number }, y: { type: Types.Number } };

class Velocity extends Component {}
Velocity.schema = { x: { type: Types.Number }, y: { type: Types.Number } };
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°–∏—Å—Ç–µ–º
```typescript
class MovementSystem extends System {
  execute(deltaTime: number) {
    this.queries.moving.results.forEach(entity => {
      const pos = entity.getComponent(Position);
      const vel = entity.getComponent(Velocity);
      pos.x += vel.x * deltaTime;
      pos.y += vel.y * deltaTime;
      entity.getMutableComponent(Position).x = pos.x;
      entity.getMutableComponent(Position).y = pos.y;
    });
  }
}

MovementSystem.queries = {
  moving: { components: [Position, Velocity] }
};
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∏—Ä–∞
```typescript
const world = new World();
world
  .registerComponent(Position)
  .registerComponent(Velocity)
  .registerSystem(MovementSystem);
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –°—É—â–Ω–æ—Å—Ç–∏
```typescript
const player = world.createEntity();
player.addComponent(Position, { x: 100, y: 100 });
player.addComponent(Velocity, { x: 50, y: 0 });
```

#### –¶–∏–∫–ª –∏–≥—Ä—ã
```typescript
function gameLoop() {
  const dt = 1 / 60; // 60 FPS
  world.execute(dt);
}
```
